<h1><%= format_month(@event.time)%> Voting</h1>

<% if @event.voting_started? %>
  <% if @state.user_finished_voting? %>
    <p>Thank you for voting!</p>

  <% elsif @state.user_started_voting? %>
    <%= render partial: "voting", locals: { state: @state } %>

  <% else %>
    <h2>Welcome, we hacked, now we vote!</h2>

    <p>
      Voting is now open! You will be voting on the following awards:
    </p>

    <%= render partial: "voting_overview", locals: { state: @state } %>

    <hr/>

    <p>To start voting, first enter a username.</p>
    <%= form_with(url: new_event_vote_path(@event), method: :get, local: true) do |f| %>
      <%= f.hidden_field :award_id, value: @state.next_award.id %>
      <%= f.text_field :username, placeholder: "Username", required: true %>

      <%= f.submit("Start voting!", name: nil, id: "start_voting") %>
    <% end %>

  <% end %>

<% elsif @event.voting_not_started? %>
  <p>Voting has not yet started - please come back later!</p>

  <hr/>

  <p>
    You will be voting on the following awards:
  </p>

  <%= render partial: "voting_overview", locals: { state: @state } %>

<% else %>
  <p>Voting is over for this event.</p>

  <hr/>

  <p>
    Participants voted on the following awards:
  </p>

  <%= render partial: "voting_overview", locals: { state: @state } %>
<% end %>
